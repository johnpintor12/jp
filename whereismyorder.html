<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Order Status Workflow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/global_styles.css">
    <style>
        /* Theme-specific styles for Customer Order Status Workflow (Indigo Theme) */
        /* Add this class to body if this page uses the TOC sidebar */
        body.has-toc {
            display: flex;
        }
        /* Default TOC header and active link colors for this page */
        #toc-sidebar h2 { color: #4f46e5; }
        #toc-sidebar li a:hover,
        #toc-sidebar li a.active { background-color: #eef2ff; color: #4f46e5; }
        #toc-sidebar ul ul li a:hover,
        #toc-sidebar ul ul li a.active { color: #4f46e5; background-color: #e0e7ff; }

        /* Main step header color for this page */
        .step-header { background-color: #4f46e5; }
        /* Specific card header colors (these will override the general .step-header if class is present) */
        .prerequisite-card .step-header { background-color: #ef4444 !important; }
        .escalation-card .step-header { background-color: #8b5cf6 !important; }

        /* Scroll to top button color for this page */
        #scrollToTopBtn { background-color: #4f46e5; }
        #scrollToTopBtn:hover { background-color: #4338ca; }

        @media print {
            .step-header { background-color: #c7d2fe !important; color: #3730a3 !important; }
            .prerequisite-card .step-header { background-color: #fecaca !important; color: #7f1d1d !important;}
            .escalation-card .step-header { background-color: #ddd6fe !important; color: #4c1d95 !important;}
            #toc-sidebar h2 { color: #4f46e5 !important; }
        }
    </style>
</head>
<body class="has-toc"> <button id="menu-toggle" aria-label="Open navigation menu">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
    </button>

    <nav id="toc-sidebar">
        <h2>Workflow Navigation</h2>
        <ul>
            <li>
                <a href="index.html" class="back-link">
                    <svg class="inline-block mr-1 -ml-1 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" style="vertical-align: text-bottom;">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Back to Library
                </a>
            </li>
            <li><a href="#general-guidelines">General Guidelines</a></li>
            <li><a href="#context">Context</a></li>
            <li><a href="#step0">Step 0: Prerequisite Check</a></li>
            <li>
                <a href="#step1">Step 1: Identify Customer & Order</a>
                <ul>
                    <li><a href="#step1a">A. Initial Interaction</a></li>
                    <li><a href="#step1b">B. Order Identification</a></li>
                    <li><a href="#step1c">C. Cross-Check Unfulfilled</a></li>
                    <li><a href="#step1d">D. Insufficient Info</a></li>
                </ul>
            </li>
            <li><a href="#step2">Step 2: Check Fulfillment Status</a></li>
            <li><a href="#step3">Step 3: Check Tracking URLs</a></li>
            <li><a href="#step4">Step 4: Ticket Resolution</a></li>
            <li><a href="#step5">Step 5: Escalate to Agent</a></li>
        </ul>
    </nav>

    <div class="main-content-area toc-active"> <header class="text-center mb-10">
            <h1 class="text-3xl font-bold text-gray-800">Customer Order Status Workflow</h1>
            <p class="text-lg text-gray-600">Visualized Logic for "Elisha Persona" Automation</p>
        </header>

        <div class="max-w-4xl mx-auto"> 
            <div id="general-guidelines" class="content-section flow-element">
                <h2>General Guidelines</h2>
                <ul>
                    <li>Use natural, conversational language in all responses.</li>
                    <li>Be flexible in interpreting customer inputs - they may provide information in various formats.</li>
                    <li>If you're unsure about any input, ask for clarification politely.</li>
                    <li>Always maintain a helpful and friendly tone.</li>
                    <li>Prioritize customer satisfaction while following company policies.</li>
                </ul>
            </div>

            <div class="connector">▼</div>

            <div id="context" class="content-section flow-element">
                <h2>Context</h2>
                <p>Customers are going to be reaching out about their order status. Your job is to look up their order details, prioritizing any unfulfilled orders, and assist them by providing relevant information.</p>
            </div>

            <div class="connector">▼</div>

            <div id="step0" class="step-card prerequisite-card flow-element">
                <div class="step-header"> 
                    <h3>Step 0: Prerequisite Check</h3>
                </div>
                <div class="step-content">
                    <p class="mb-2">Automation "Initial Greeting & Query Clarification (Elisha Persona)" must finish collecting the customer's order number or email address used for the order.</p>
                    <ul>
                        <li><strong>If NEITHER is present:</strong>
                            <span class="badge badge-red">DO NOT TRIGGER</span>
                            Automation exits. Initial customer query automation handles the interaction.
                        </li>
                        <li><strong>If EITHER an order number or email address is present:</strong>
                            <span class="badge badge-green">PROCEED</span>
                            to Step 1.
                        </li>
                    </ul>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step1" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 1: Identify the Customer and the Most Relevant Order</h3>
                    <p class="sub-persona">(Prioritizing Unfulfilled)</p>
                </div>
                <div class="step-content">
                    <div id="step1a" class="action-card mb-4">
                        <h4>A. Initial Interaction & Information Gathering</h4>
                        <ul>
                            <li>Greet the customer.</li>
                            <li>Ask if they have a specific order number they are inquiring about, or if they'd like you to look up their recent orders using their email address.</li>
                        </ul>
                    </div>
                    <div id="step1b" class="scenario-card">
                        <h4>B. Order Identification Based on Provided Information</h4>
                         <div class="mt-3 space-y-3">
                            <div class="p-3 border rounded-md bg-white">
                                <p class="font-semibold">Scenario 1: Customer provides an Order Number.</p>
                                <ol class="list-decimal pl-5 mt-1">
                                    <li>Attempt to locate the order using the provided number.</li>
                                    <li><strong>If the order is found:</strong>
                                        <ul class="list-disc pl-5">
                                            <li>Retrieve the customer's email address associated with this order.</li>
                                            <li>Note the status of this specific order (e.g., Unfulfilled, Fulfilled, Shipped).</li>
                                            <li>Record the initially provided order number and its status.</li>
                                            <li><span class="badge badge-blue">PROCEED</span> to Section C (Cross-Check for Unfulfilled Orders & Confirmation) using the retrieved email and the context of their initial order number query.</li>
                                        </ul>
                                    </li>
                                    <li><strong>If the order is NOT found:</strong>
                                        <ul class="list-disc pl-5">
                                            <li>Inform the customer.</li>
                                            <li>Ask for the email address they used for the purchase.</li>
                                            <li>If an email is provided: <span class="badge badge-blue">PROCEED</span> to Section C.</li>
                                            <li>If no email is provided: <span class="badge badge-yellow">PROCEED</span> to Section D.</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                            <div class="p-3 border rounded-md bg-white">
                                <p class="font-semibold">Scenario 2: Customer provides an Email Address (either initially or after an order number lookup fails).</p>
                                <ol class="list-decimal pl-5 mt-1">
                                    <li><span class="badge badge-blue">PROCEED</span> directly to Section C (Cross-Check for Unfulfilled Orders & Confirmation) using this email.</li>
                                </ol>
                            </div>
                            <div class="p-3 border rounded-md bg-white">
                                <p class="font-semibold">Scenario 3: Customer provides no initial identifying information (or declines after the initial ask in A).</p>
                                <ol class="list-decimal pl-5 mt-1">
                                    <li><span class="badge badge-yellow">PROCEED</span> to Section D (Handling Insufficient Information).</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div id="step1c" class="decision-card mt-4">
                        <h4>C. Cross-Check for Unfulfilled Orders & Confirmation (Using Customer's Email Address)</h4>
                        <ol class="list-decimal pl-5 mt-2 space-y-2">
                            <li>Using the customer's email address, search for all orders linked to it.</li>
                            <li>Check if there are any unfulfilled orders.</li>
                            <li class="font-semibold">Decision Point based on initial inquiry and unfulfilled order status:
                                <div class="mt-2 space-y-3">
                                    <div class="p-3 border rounded-md bg-yellow-50">
                                        <p class="font-medium">Condition 1: If the customer initially provided an order number for a FULFILLED order AND there is also at least one UNFULFILLED order associated with their email:</p>
                                        <ul class="list-disc pl-5 mt-1">
                                            <li>Acknowledge their specific request: "Okay, I can certainly give you an update on order #YYYYY (which I see is fulfilled/shipped)."</li>
                                            <li>Inform about the unfulfilled order: "Before we dive into that, I also noticed you have a more recent unfulfilled order, #XXXXX, placed on [Date]. Would you prefer an update on this unfulfilled order first, or should we go ahead with the details for order #YYYYY that you asked about?"</li>
                                            <li>If they choose the unfulfilled order #XXXXX, it becomes the "identified order." <span class="badge badge-green">PROCEED</span> to Step 2.</li>
                                            <li>If they choose the fulfilled order #YYYYY, it becomes the "identified order." <span class="badge badge-green">PROCEED</span> to Step 2.</li>
                                        </ul>
                                    </div>
                                    <div class="p-3 border rounded-md bg-yellow-50">
                                        <p class="font-medium">Condition 2 (Else):</p>
                                        <ul class="list-disc pl-5 mt-1">
                                            <li><strong>If one or more UNFULFILLED order(s) exist:</strong>
                                                <ul class="list-disc pl-5">
                                                    <li>Focus on the MOST RECENT unfulfilled order.</li>
                                                    <li>Inform: "I see you have an unfulfilled order, #XXXXX, placed on [Date]. Is this the order you're asking about today?"</li>
                                                    <li>If YES: This is the "identified order." <span class="badge badge-green">PROCEED</span> to Step 2.</li>
                                                    <li>If NO: Proceed to "Fulfilled Orders" logic below.</li>
                                                </ul>
                                            </li>
                                            <li><strong>If NO UNFULFILLED orders exist:</strong> Address recent FULFILLED orders:
                                                <ul class="list-disc pl-5">
                                                    <li>If customer initially provided a specific FULFILLED order#: "Okay, regarding order #YYYYY..." This is the "identified order." <span class="badge badge-green">PROCEED</span> to Step 2.</li>
                                                    <li>If only ONE fulfilled order in last 60 days: "I see one recent order, #YYYYY..." If YES, this is "identified order." <span class="badge badge-green">PROCEED</span> to Step 2.</li>
                                                    <li>If MULTIPLE fulfilled orders in last 60 days: "I see a couple of recent fulfilled orders..." Once clarified, this is "identified order." <span class="badge badge-green">PROCEED</span> to Step 2.</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li><strong>If no specific order confirmed/found:</strong>
                                <ul class="list-disc pl-5 mt-1">
                                    <li>Inform: "I couldn't find any active or recent orders... Could you please double-check..."</li>
                                    <li>If new info: Re-evaluate from Section B.</li>
                                    <li>If not: <span class="badge badge-yellow">PROCEED</span> to Section D.</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                    <div id="step1d" class="info-card mt-4">
                        <h4>D. Handling Insufficient Information</h4>
                         <ul class="list-disc pl-5 mt-1">
                            <li>If order not identified: "To help me find your order status, I'll need... order number or the email..."</li>
                            <li>(If still no info, explain inability to look up).</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step2" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 2: Check the Fulfillment Status and Order Tags</h3>
                    <p class="sub-persona">(For the "Identified Order")</p>
                </div>
                <div class="step-content space-y-3">
                    <div class="p-3 border rounded-md bg-blue-50">
                        <p><strong class="text-blue-700">If "Unfulfilled":</strong> Tell customer processing (1-2 biz days), email w/ tracking when shipped.</p>
                    </div>
                    <div class="p-3 border rounded-md bg-green-50">
                        <p><strong class="text-green-700">If "Fulfilled" or "Shipped":</strong> Check Tracking URL, provide update & link.</p>
                    </div>
                    <div class="p-3 border rounded-md bg-yellow-50">
                        <p><strong class="text-yellow-700">If "Partially Fulfilled":</strong> Check line items, provide all Tracking URL info.</p>
                    </div>
                    <div class="p-3 border rounded-md bg-purple-50">
                        <p><strong class="text-purple-700">If "In Progress" or "pre-order" tag:</strong> Inform high volume, +3-5 biz days for fulfillment.</p>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step3" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 3: Check any available Tracking URLs</h3>
                     <p class="sub-persona">(For the "Identified Order")</p>
                </div>
                <div class="step-content space-y-3">
                     <div class="p-3 border rounded-md bg-blue-50">
                        <p><strong class="text-blue-700">If "In Transit":</strong> Order on the way, check link for updates.</p>
                    </div>
                    <div class="p-3 border rounded-md bg-green-50">
                        <p><strong class="text-green-700">If "Out for delivery":</strong> Confirm out for delivery, should arrive soon.</p>
                    </div>
                    <div class="p-3 border rounded-md bg-red-50">
                        <p><strong class="text-red-700">If "Delivered" (customer says not received):</strong> Looks delivered, provide delivery date.</p>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step4" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 4: Ticket Resolution</h3>
                </div>
                <div class="step-content">
                    <ul class="list-disc pl-5 space-y-2">
                        <li>After providing info, ask if anything else needed.</li>
                        <li><strong>If NO further assistance:</strong> Thank, inform closing, Mark 'Solved'. <span class="badge badge-green">SOLVED</span></li>
                        <li><strong>If YES (answerable with order info):</strong> Provide info, then close as above. <span class="badge badge-green">SOLVED</span></li>
                        <li><strong>If YES (not fully addressable):</strong> <span class="badge badge-purple">PROCEED</span> to Step 5.</li>
                    </ul>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step5" class="step-card escalation-card flow-element">
                <div class="step-header"> 
                    <h3>Step 5: Assign to Agent and Route to Team</h3>
                    <p class="sub-persona">(If Unable to Resolve)</p>
                </div>
                <div class="step-content">
                    <p class="mb-2">If not fully addressed or questions outside scope:</p>
                    <ol class="list-decimal pl-5 space-y-2">
                        <li>Inform: "I apologize, but it seems your inquiry requires additional assistance... I'm going to assign your case to one of our customer support agents..."</li>
                        <li>Route to team: Status "Open", Tag "siena-follow-needed".</li>
                        <li>Assign to <strong>Jade Solano</strong> (internal).</li>
                        <li>Closing message: "A customer support agent will review your case... Thank you for your patience..."</li>
                    </ol>
                </div>
            </div>
        </div> 
    </div> 

    <button onclick="scrollToTop()" id="scrollToTopBtn" title="Go to top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
            <path fill-rule="evenodd" d="M10 17a.75.75 0 01-.75-.75V5.56l-2.47 2.47a.75.75 0 01-1.06-1.06l3.75-3.75a.75.75 0 011.06 0l3.75 3.75a.75.75 0 11-1.06 1.06L10.75 5.56v10.69A.75.75 0 0110 17z" clip-rule="evenodd" />
        </svg>
    </button>
    <script>
        var scrollToTopButton = document.getElementById("scrollToTopBtn");
        window.onscroll = function() {scrollFunction()};
        function scrollFunction() {
            if (scrollToTopButton) {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                    scrollToTopButton.style.display = "block";
                } else {
                    scrollToTopButton.style.display = "none";
                }
            }
        }
        function scrollToTop() {
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        document.querySelectorAll('#toc-sidebar a:not(.back-link)').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const targetId = this.getAttribute('href');
                if (targetId && targetId.startsWith('#')) {
                    e.preventDefault();
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        document.querySelectorAll('#toc-sidebar a').forEach(link => link.classList.remove('active'));
                        this.classList.add('active');
                    }
                }
            });
        });

        const sections = document.querySelectorAll('.content-section[id], .step-card[id]');
        const tocLinks = document.querySelectorAll('#toc-sidebar a:not(.back-link)');
        const makeActive = (linkId) => {
            tocLinks.forEach(l => l.classList.remove('active'));
            if (linkId) {
                const correspondingLink = document.querySelector(`#toc-sidebar a[href="#${linkId}"]`);
                if (correspondingLink) {
                    correspondingLink.classList.add('active');
                     const parentLi = correspondingLink.closest('ul')?.closest('li');
                    if (parentLi) {
                        const parentAnchor = parentLi.querySelector('a');
                        if(parentAnchor && parentAnchor.getAttribute('href').startsWith('#step')) { 
                           parentAnchor.classList.add('active');
                        }
                    }
                }
            }
        };
        const observer = new IntersectionObserver(entries => {
            let intersectingEntry = null;
            for (let i = 0; i < entries.length; i++) {
                 if (entries[i].isIntersecting) {
                    if (!intersectingEntry || entries[i].target.getBoundingClientRect().top < intersectingEntry.target.getBoundingClientRect().top) {
                        if (entries[i].intersectionRatio >= 0.1) { 
                           intersectingEntry = entries[i];
                        }
                    }
                 }
            }
            if (intersectingEntry) {
                 makeActive(intersectingEntry.target.id);
            }
        }, { threshold: [0.1, 0.5], rootMargin: "-40% 0px -50% 0px" });
        sections.forEach(section => { if (section.id) { observer.observe(section); } });
    </script>
</body>
</html>
