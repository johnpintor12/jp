<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Return Request Workflow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/global_styles.css">
    <style>
        /* Theme-specific styles for Return Request Workflow (Orange Theme) */
        
        :root { 
            /* --top-bar-height is defined in global_styles.css */
            --page-theme-color-main: #fb923c; /* Orange-500 */
            --page-theme-color-darker: #f97316; /* Orange-600 */
            --page-theme-color-lighter: #ffedd5; /* Orange-100 */
            --page-theme-color-lightest: #fff7ed; /* Orange-50 */
        }

        .app-top-bar { 
            background-color: var(--page-theme-color-main);
        }
        /* #menu-toggle color is white by default in global_styles if top bar is dark */

        #toc-sidebar h2 {
            color: var(--page-theme-color-darker); /* Using darker orange for TOC title for better contrast */
        }
        #toc-sidebar li a:hover,
        #toc-sidebar li a.active {
            background-color: var(--page-theme-color-lightest);
            color: var(--page-theme-color-darker);
        }
         #toc-sidebar ul ul li a:hover,
         #toc-sidebar ul ul li a.active { 
             color: var(--page-theme-color-darker);
             background-color: var(--page-theme-color-lighter);
        }

        .step-header { /* Main step header color for this page */
            background-color: var(--page-theme-color-main);
        }
        /* Specific card header colors */
        .documentation-card .step-header { /* This class is from global_styles.css */
             background-color: #60a5fa !important; /* Lighter Blue for documentation step header */
        }
        
        #scrollToTopBtn {
            background-color: var(--page-theme-color-main);
        }
        #scrollToTopBtn:hover {
            background-color: var(--page-theme-color-darker);
        }

        /* Print-specific overrides for themed elements */
        @media print {
            /* .app-top-bar is already display:none in global_styles.css for print */
            .step-header { 
                background-color: #fed7aa !important; /* Lighter Orange for print */
                color: #c2410c !important; 
            }
            .documentation-card .step-header {
                 background-color: #bfdbfe !important; 
                 color: #1e40af !important;
            }
            #toc-sidebar h2 { /* This won't be visible due to TOC being hidden in print */
                color: var(--page-theme-color-darker) !important; 
            }
        }
    </style>
</head>
<body class="has-toc"> 

    <div class="app-top-bar">
        <button id="menu-toggle" aria-label="Open navigation menu">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
        </button>
        </div>
    <div id="page-overlay"></div>

    <nav id="toc-sidebar">
        <h2>Workflow Navigation</h2>
        <ul>
            <li>
                <a href="index.html" class="back-link">
                    <svg class="inline-block mr-1 -ml-1 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" style="vertical-align: text-bottom;">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Back to Library
                </a>
            </li>
            <li><a href="#context">Context</a></li>
            <li><a href="#step1">Step 1: Identify Order</a></li>
            <li><a href="#step2">Step 2: Verify Eligibility</a>
                <ul>
                    <li><a href="#step2a">A. Check Delivery Date</a></li>
                    <li><a href="#step2b">B. Ask for Reason</a></li>
                    <li><a href="#step2c">C. Check Item Condition</a></li>
                </ul>
            </li>
            <li><a href="#step3">Step 3: Provide Instructions</a></li>
            <li><a href="#step4">Step 4: Document & Tag</a></li>
        </ul>
    </nav>

    <div class="main-content-area"> 
        <header class="text-center mb-10 pt-4 md:pt-0"> 
            <h1 class="text-3xl font-bold text-gray-800">Return Request Workflow</h1>
            <p class="text-lg text-gray-600">Visualized Logic for Handling Customer Item Returns</p>
        </header>

        <div class="max-w-4xl mx-auto">

            <div id="context" class="content-section flow-element">
                <h2>Context</h2>
                <p>Customers reaching out with this intent want to return an item they received. Your job is to verify whether the item qualifies for a return based on our return policy and, if eligible, provide the appropriate next steps.</p>
            </div>

            <div class="connector">▼</div>

            <div id="step1" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 1: Identify the order the customer is referring to</h3>
                </div>
                <div class="step-content">
                    <div class="scenario-card">
                        <h4>Order Identification Methods:</h4>
                        <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>
                                <strong>If the customer provides an order number:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Use it to locate the order.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>If the order number is not provided or not found:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Ask for the email address associated with the purchase.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>If the customer has only one order placed in the last 60 days (after email lookup):</strong>
                                <ul class="list-disc pl-5">
                                    <li>Assume that is the order in question. Confirm with customer if necessary.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>If they have multiple recent orders (after email lookup):</strong>
                                <ul class="list-disc pl-5">
                                    <li>Provide the two most recent order numbers and dates.</li>
                                    <li>Ask which one they want to return.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step2" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 2: Verify return eligibility based on the return policy</h3>
                </div>
                <div class="step-content">
                    <div id="step2a" class="policy-check-card mb-3">
                        <h4>A. Check the delivery date:</h4>
                        <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>
                                <strong>If the item was delivered more than 30 days ago:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Inform the customer that our return policy only allows returns within 30 days of delivery. <span class="badge badge-red">NOT ELIGIBLE (Policy)</span></li>
                                    <li>If they request an exception, let them know their request will be passed to an agent for further review. <span class="badge badge-yellow">EXCEPTION? -> AGENT</span></li>
                                </ul>
                            </li>
                            <li>
                                <strong>If the item was delivered within 30 days:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Continue to the next step (B. Reason for Return). <span class="badge badge-green">ELIGIBLE (Date)</span></li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div id="step2b" class="action-card mb-3">
                        <h4>B. Ask for the reason for the return:</h4>
                         <ul class="list-disc pl-5 mt-1">
                            <li>Let them know this helps us improve.</li>
                            <li>If the customer prefers not to share, simply acknowledge that and let them know their feedback is still appreciated. ("Okay, no problem at all.")</li>
                        </ul>
                    </div>

                    <div id="step2c" class="policy-check-card">
                        <h4>C. Ask whether the item has been opened, used, or damaged:</h4>
                         <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>
                                <strong>If the item is unopened and in its original condition:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Proceed with the return (Go to Step 3). <span class="badge badge-green">ELIGIBLE (Condition)</span></li>
                                </ul>
                            </li>
                            <li>
                                <strong>If the item is used or damaged:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Explain that our policy may not allow returns in that condition.</li>
                                    <li>Ask for photos if needed to assess further. (This may lead to agent escalation). <span class="badge badge-yellow">POTENTIAL ISSUE -> AGENT?</span></li>
                                </ul>
                            </li>
                            <li>
                                <strong>Reminder:</strong> All items must be returned with their original packaging intact. (State this if applicable when discussing condition).
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step3" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 3: Provide return instructions if eligible</h3>
                </div>
                <div class="step-content">
                    <div class="action-card">
                        <h4>Actions (If return meets policy criteria):</h4>
                        <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>Send the customer detailed return instructions.</li>
                            <li>Let them know a refund or exchange will be issued once the item is received and inspected.</li>
                            <li>
                                <strong>If return shipping is covered:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Let them know a prepaid label will be emailed.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>If return shipping is NOT covered:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Advise them to ship the item back using a trackable method at their own expense.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step4" class="step-card documentation-card flow-element">
                <div class="step-header"> 
                    <h3>Step 4: Document and tag the ticket</h3>
                </div>
                <div class="step-content">
                    <div class="action-card">
                        <h4>Internal Actions:</h4>
                        <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>Tag the conversation as “Return Request.” <span class="badge badge-blue">TAG: Return Request</span></li>
                            <li>Record the reason for return (if provided).</li>
                            <li>Record product condition.</li>
                            <li>Confirm policy compliance for reference.</li>
                        </ul>
                    </div>
                    <p class="mt-3 text-sm text-gray-600">(This step might also involve asking the customer if they need further assistance before closing or escalating, similar to other workflows, though not explicitly stated in these instructions.)</p>
                </div>
            </div>
        </div>
    </div>

    <button onclick="scrollToTop()" id="scrollToTopBtn" title="Go to top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
            <path fill-rule="evenodd" d="M10 17a.75.75 0 01-.75-.75V5.56l-2.47 2.47a.75.75 0 01-1.06-1.06l3.75-3.75a.75.75 0 011.06 0l3.75 3.75a.75.75 0 11-1.06 1.06L10.75 5.56v10.69A.75.75 0 0110 17z" clip-rule="evenodd" />
        </svg>
    </button>

    <script>
        // Scroll-to-top button functionality
        var scrollToTopButton = document.getElementById("scrollToTopBtn");
        window.onscroll = function() {scrollFunction()};
        function scrollFunction() {
            if (scrollToTopButton) {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                    scrollToTopButton.style.display = "block";
                } else {
                    scrollToTopButton.style.display = "none";
                }
            }
        }
        function scrollToTop() {
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // TOC and Hamburger Menu Functionality
        const tocSidebar = document.getElementById('toc-sidebar');
        const menuToggle = document.getElementById('menu-toggle');
        const pageOverlay = document.getElementById('page-overlay');
        const mainContent = document.querySelector('.main-content-area');
        const body = document.body;
        
        function applyLayoutBasedOnScreenSize() {
            if (window.innerWidth >= 1024 && body.classList.contains('has-toc')) {
                if(mainContent) mainContent.classList.add('toc-active'); 
                if(tocSidebar) tocSidebar.classList.add('open'); 
            } else {
                if(mainContent) mainContent.classList.remove('toc-active');
                if(tocSidebar) tocSidebar.classList.remove('open'); 
            }
        }

        if (menuToggle && tocSidebar) {
            menuToggle.addEventListener('click', () => {
                tocSidebar.classList.toggle('open');
                if (pageOverlay) pageOverlay.classList.toggle('active'); 
            });
        }
        if (pageOverlay) {
            pageOverlay.addEventListener('click', () => { 
                tocSidebar.classList.remove('open');
                pageOverlay.classList.remove('active');
            });
        }
        
        document.querySelectorAll('#toc-sidebar a:not(.back-link)').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const targetId = this.getAttribute('href');
                if (targetId && targetId.startsWith('#')) {
                    e.preventDefault();
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const topBarHeight = (window.innerWidth < 1024) ? (parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--top-bar-height')) || 60) : 0;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - topBarHeight - 10; 

                        window.scrollTo({ top: offsetPosition, behavior: 'smooth' });

                        if (window.innerWidth < 1024 && tocSidebar.classList.contains('open')) { 
                            tocSidebar.classList.remove('open');
                            if (pageOverlay) pageOverlay.classList.remove('active');
                        }
                        document.querySelectorAll('#toc-sidebar a').forEach(link => link.classList.remove('active'));
                        this.classList.add('active');
                    }
                }
            });
        });

        const sections = document.querySelectorAll('.content-section[id], .step-card[id], .policy-check-card[id], .action-card[id], .documentation-card[id]'); 
        const tocLinksJS = document.querySelectorAll('#toc-sidebar a:not(.back-link)');
        
        const makeActive = (linkId) => {
            tocLinksJS.forEach(l => l.classList.remove('active'));
            if (linkId) {
                const correspondingLink = document.querySelector(`#toc-sidebar a[href="#${linkId}"]`);
                if (correspondingLink) {
                    correspondingLink.classList.add('active');
                     const parentLi = correspondingLink.closest('ul')?.closest('li');
                    if (parentLi) {
                        const parentAnchor = parentLi.querySelector('a');
                        if(parentAnchor && !parentAnchor.classList.contains('back-link') && parentAnchor.getAttribute('href').startsWith('#step')) { 
                           parentAnchor.classList.add('active');
                        }
                    }
                }
            }
        };
        
        const observer = new IntersectionObserver(entries => {
            let intersectingEntry = null;
            const topBarHeightForObserver = (window.innerWidth < 1024) ? (parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--top-bar-height')) || 60) : 0;
            for (let i = 0; i < entries.length; i++) { 
                 if (entries[i].isIntersecting) {
                    if (!intersectingEntry || entries[i].target.getBoundingClientRect().top < intersectingEntry.target.getBoundingClientRect().top) {
                        if (entries[i].intersectionRatio >= 0.1) { 
                           intersectingEntry = entries[i];
                        }
                    }
                 }
            }
            if (intersectingEntry) {
                 makeActive(intersectingEntry.target.id);
            }
        }, { 
            threshold: [0.1, 0.5], 
            rootMargin: `-${(parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--top-bar-height')) || 60) + 20}px 0px -60% 0px` 
        });

        sections.forEach(section => { if (section.id) { observer.observe(section); } });
        
        window.addEventListener('resize', applyLayoutBasedOnScreenSize);
        applyLayoutBasedOnScreenSize(); // Initial call
    </script>

</body>
</html>
