<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Return Request Workflow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/global_styles.css">
    <style>
        /* Theme-specific styles for Return Request Workflow (Orange Theme) */
        body {
            /* display: flex; /* Uncomment if TOC sidebar is used and not globally set */
        }

        .step-header {
            background-color: #fb923c; /* Orange-500 - Main theme for this workflow's steps */
        }
        /* Specific card header colors if they differ from the main step-header */
        /* (No specific overrides for prerequisite/escalation in this workflow's original design, but can be added) */
        .documentation-card .step-header { /* Example if documentation had a unique header */
             background-color: #60a5fa !important; /* Blue-500 for documentation card header */
        }


        #scrollToTopBtn {
            background-color: #fb923c; /* Orange-500 - Main theme for this workflow's scroll button */
        }
        #scrollToTopBtn:hover {
            background-color: #f97316; /* Darker Orange-600 on hover */
        }

        /* Print-specific overrides for themed elements if global print styles are too generic */
        @media print {
            .step-header { 
                background-color: #fed7aa !important; /* Lighter Orange for print */
                color: #c2410c !important; 
            }
            .documentation-card .step-header {
                 background-color: #bfdbfe !important; /* Lighter Blue for print */
                 color: #1e40af !important;
            }
            #toc-sidebar h2 {
                color: #f97316 !important; /* Ensure TOC header color prints if desired */
            }
        }
    </style>
</head>
<body> 

    <nav id="toc-sidebar">
        <h2>Workflow Navigation</h2>
        <ul>
            <li>
                <a href="index.html" class="back-link">
                    <svg class="inline-block mr-1 -ml-1 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" style="vertical-align: text-bottom;">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Back to Library
                </a>
            </li>
            <li><a href="#context">Context</a></li>
            <li><a href="#step1">Step 1: Identify Order</a></li>
            <li><a href="#step2">Step 2: Verify Eligibility</a>
                <ul>
                    <li><a href="#step2a">A. Check Delivery Date</a></li>
                    <li><a href="#step2b">B. Ask for Reason</a></li>
                    <li><a href="#step2c">C. Check Item Condition</a></li>
                </ul>
            </li>
            <li><a href="#step3">Step 3: Provide Instructions</a></li>
            <li><a href="#step4">Step 4: Document & Tag</a></li>
        </ul>
    </nav>

    <div class="main-content-area">
        <header class="text-center mb-10">
            <h1 class="text-3xl font-bold text-gray-800">Return Request Workflow</h1>
            <p class="text-lg text-gray-600">Visualized Logic for Handling Customer Item Returns</p>
        </header>

        <div class="max-w-4xl mx-auto">

            <div id="context" class="content-section flow-element">
                <h2>Context</h2>
                <p>Customers reaching out with this intent want to return an item they received. Your job is to verify whether the item qualifies for a return based on our return policy and, if eligible, provide the appropriate next steps.</p>
            </div>

            <div class="connector">▼</div>

            <div id="step1" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 1: Identify the order the customer is referring to</h3>
                </div>
                <div class="step-content">
                    <div class="scenario-card">
                        <h4>Order Identification Methods:</h4>
                        <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>
                                <strong>If the customer provides an order number:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Use it to locate the order.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>If the order number is not provided or not found:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Ask for the email address associated with the purchase.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>If the customer has only one order placed in the last 60 days (after email lookup):</strong>
                                <ul class="list-disc pl-5">
                                    <li>Assume that is the order in question. Confirm with customer if necessary.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>If they have multiple recent orders (after email lookup):</strong>
                                <ul class="list-disc pl-5">
                                    <li>Provide the two most recent order numbers and dates.</li>
                                    <li>Ask which one they want to return.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step2" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 2: Verify return eligibility based on the return policy</h3>
                </div>
                <div class="step-content">
                    <div id="step2a" class="policy-check-card mb-3">
                        <h4>A. Check the delivery date:</h4>
                        <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>
                                <strong>If the item was delivered more than 30 days ago:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Inform the customer that our return policy only allows returns within 30 days of delivery. <span class="badge badge-red">NOT ELIGIBLE (Policy)</span></li>
                                    <li>If they request an exception, let them know their request will be passed to an agent for further review. <span class="badge badge-yellow">EXCEPTION? -> AGENT</span></li>
                                </ul>
                            </li>
                            <li>
                                <strong>If the item was delivered within 30 days:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Continue to the next step (B. Reason for Return). <span class="badge badge-green">ELIGIBLE (Date)</span></li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div id="step2b" class="action-card mb-3">
                        <h4>B. Ask for the reason for the return:</h4>
                         <ul class="list-disc pl-5 mt-1">
                            <li>Let them know this helps us improve.</li>
                            <li>If the customer prefers not to share, simply acknowledge that and let them know their feedback is still appreciated. ("Okay, no problem at all.")</li>
                        </ul>
                    </div>

                    <div id="step2c" class="policy-check-card">
                        <h4>C. Ask whether the item has been opened, used, or damaged:</h4>
                         <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>
                                <strong>If the item is unopened and in its original condition:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Proceed with the return (Go to Step 3). <span class="badge badge-green">ELIGIBLE (Condition)</span></li>
                                </ul>
                            </li>
                            <li>
                                <strong>If the item is used or damaged:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Explain that our policy may not allow returns in that condition.</li>
                                    <li>Ask for photos if needed to assess further. (This may lead to agent escalation). <span class="badge badge-yellow">POTENTIAL ISSUE -> AGENT?</span></li>
                                </ul>
                            </li>
                            <li>
                                <strong>Reminder:</strong> All items must be returned with their original packaging intact. (State this if applicable when discussing condition).
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step3" class="step-card flow-element">
                <div class="step-header">
                    <h3>Step 3: Provide return instructions if eligible</h3>
                </div>
                <div class="step-content">
                    <div class="action-card">
                        <h4>Actions (If return meets policy criteria):</h4>
                        <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>Send the customer detailed return instructions.</li>
                            <li>Let them know a refund or exchange will be issued once the item is received and inspected.</li>
                            <li>
                                <strong>If return shipping is covered:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Let them know a prepaid label will be emailed.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>If return shipping is NOT covered:</strong>
                                <ul class="list-disc pl-5">
                                    <li>Advise them to ship the item back using a trackable method at their own expense.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="connector">▼</div>

            <div id="step4" class="step-card documentation-card flow-element">
                <div class="step-header"> <h3>Step 4: Document and tag the ticket</h3>
                </div>
                <div class="step-content">
                    <div class="action-card">
                        <h4>Internal Actions:</h4>
                        <ul class="list-disc pl-5 mt-1 space-y-2">
                            <li>Tag the conversation as “Return Request.” <span class="badge badge-blue">TAG: Return Request</span></li>
                            <li>Record the reason for return (if provided).</li>
                            <li>Record product condition.</li>
                            <li>Confirm policy compliance for reference.</li>
                        </ul>
                    </div>
                    <p class="mt-3 text-sm text-gray-600">(This step might also involve asking the customer if they need further assistance before closing or escalating, similar to other workflows, though not explicitly stated in these instructions.)</p>
                </div>
            </div>
        </div>
    </div>

    <button onclick="scrollToTop()" id="scrollToTopBtn" title="Go to top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
            <path fill-rule="evenodd" d="M10 17a.75.75 0 01-.75-.75V5.56l-2.47 2.47a.75.75 0 01-1.06-1.06l3.75-3.75a.75.75 0 011.06 0l3.75 3.75a.75.75 0 11-1.06 1.06L10.75 5.56v10.69A.75.75 0 0110 17z" clip-rule="evenodd" />
        </svg>
    </button>

    <script>
        // Scroll-to-top button functionality
        var scrollToTopButton = document.getElementById("scrollToTopBtn");
        window.onscroll = function() {scrollFunction()};
        function scrollFunction() {
            if (scrollToTopButton) {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                    scrollToTopButton.style.display = "block";
                } else {
                    scrollToTopButton.style.display = "none";
                }
            }
        }
        function scrollToTop() {
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // TOC smooth scrolling and active state
        document.querySelectorAll('#toc-sidebar a:not(.back-link)').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const targetId = this.getAttribute('href');
                if (targetId && targetId.startsWith('#')) {
                    e.preventDefault();
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        document.querySelectorAll('#toc-sidebar a').forEach(link => link.classList.remove('active'));
                        this.classList.add('active');
                    }
                }
            });
        });

        const sections = document.querySelectorAll('.content-section[id], .step-card[id], .policy-check-card[id], .action-card[id], .documentation-card[id]');
        const tocLinks = document.querySelectorAll('#toc-sidebar a:not(.back-link)');

        const makeActive = (linkId) => {
            tocLinks.forEach(l => l.classList.remove('active'));
            if (linkId) {
                const correspondingLink = document.querySelector(`#toc-sidebar a[href="#${linkId}"]`);
                if (correspondingLink) {
                    correspondingLink.classList.add('active');
                }
            }
        };

        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
                    makeActive(entry.target.id);
                }
            });
        }, {
            threshold: 0.5,
            rootMargin: "-50px 0px -50% 0px" 
        });

        sections.forEach(section => {
            if (section.id) {
                 observer.observe(section);
            }
        });
    </script>

</body>
</html>
